<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>üíå Feri is Waiting...</title>
<style>
    @import url('https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap');
    body {
        background: radial-gradient(circle at 40% 40%, #a0eaff 40%, #ffb6d5 100%);
        font-family: 'Segoe UI', 'Candara', sans-serif;
        color: #442323;
        margin: 0;
        padding: 0;
        overflow-x: hidden;
        font-size: 16px;
    }
    .container {
        max-width: 520px;
        margin: 80px auto;
        background: rgba(255,255,255,0.96);
        border-radius: 20px;
        box-shadow: 0 8px 40px #ffb1b1;
        padding: 40px 30px 45px 30px;
        text-align: center;
        animation: fadeIn 1.2s ease;
        position: relative;
    }
    h1 {
        font-family: 'Great Vibes', cursive;
        font-size: 3rem;
        margin-bottom: 0.3em;
    }
    .subtitle {
        font-size: 1.2em;
        color: #ff4c8b;
        margin-bottom: 36px;
        font-style: italic;
    }
    .love-quote {
        font-style: italic;
        font-size: 1.1rem;
        color: #e75480;
        margin-bottom: 30px;
        border-left: 5px solid #ff80ab;
        padding-left: 15px;
    }
    button {
        background: linear-gradient(90deg, #ff6f88, #ffb1b1);
        color: #fff;
        border: none;
        font-size: 1.1em;
        padding: 14px 40px;
        margin: 15px 10px;
        border-radius: 40px;
        cursor: pointer;
        box-shadow: 0 2px 12px #ffb1b1cc;
        transition: transform 0.3s, background 0.3s;
        animation: bounce 1.5s infinite alternate;
    }
    button:hover {
        transform: scale(1.12);
        background: linear-gradient(90deg, #ffb1b1, #ff6f88);
    }
    @keyframes bounce { from {transform: translateY(0);} to {transform: translateY(-6px);} }
    .popup {
        display: none;
        position: fixed;
        top: 50%; left: 50%;
        transform: translate(-50%, -50%) scale(0.8);
        background: #fffbe6;
        box-shadow: 0 4px 32px #ffb1b1;
        border-radius: 20px;
        padding: 35px 30px;
        z-index: 999;
        max-width: 420px;
        text-align: center;
        opacity: 0;
        animation: popupAnim 0.6s forwards;
    }
    .btn-group { margin: 24px 0 10px 0; }
    #confessionText {
        white-space: pre-wrap;
        font-weight: 600;
        color: #8b3a3a;
        margin-bottom: 18px;
        max-height: 150px;
        overflow-y: auto;
        user-select: text;
    }
    #response {
        margin-top: 24px;
        font-size: 1.3rem;
        font-weight: bold;
    }
    .yes-confetti {
        margin-top: 16px;
        font-size: 1.5em;
        color: #e74c3c;
        animation: confetti 1.2s linear forwards;
    }
    .no-sad {
        margin-top: 16px;
        font-size: 1.2em;
        color: #847e7e;
        animation: cryAnim 1s infinite alternate;
    }
    #noteInput {
        width: 90%;
        margin-top: 8px;
        padding: 10px 14px;
        font-size: 1rem;
        border-radius: 12px;
        border: 2px solid #ff9090;
        resize: vertical;
    }
    #musicToggle { background: #f77; font-size: 0.9em; padding: 8px 18px; margin-bottom: 15px; border-radius: 20px; }
    @keyframes fadeIn { from {opacity:0; transform:translateY(20px);} to {opacity:1; transform:translateY(0);} }
    @keyframes popupAnim { to {opacity:1; transform:translate(-50%,-50%) scale(1);} }
    @keyframes confetti { 0% {opacity:0; transform:translateY(-10px);} 100% {opacity:1; transform:translateY(0);} }
    @keyframes cryAnim { from {transform: translateY(0);} to {transform: translateY(6px);} }
    .heart {
        position: fixed;
        bottom: -20px;
        font-size: 22px;
        color: #ff6f88;
        animation: floatUp 6s linear infinite;
        opacity: 0.85;
        user-select: none;
    }
    @keyframes floatUp { from {transform: translateY(0) scale(1);} to {transform: translateY(-120vh) scale(1.6);} }
    @keyframes riseUp { from {transform: translateY(0); opacity:1;} to {transform: translateY(-120vh); opacity:0;} }
    #countdown { font-weight:700; font-size:2.1rem; margin:24px 0; color:#d24d4d; font-family:'Great Vibes', cursive; }
</style>
</head>
<body>
<audio id="bgMusic" loop>
    <source src="https://cdn.pixabay.com/download/audio/2023/09/15/audio_81f6f3c5c0.mp3?filename=romantic-violin-3.mp3" type="audio/mpeg" />
</audio>

<div class="container">
    <h1>üåπ Candlelight Love Proposal üåπ</h1>
    <p class="subtitle">A gentle question from my heart...</p>
    <div class="love-quote">"Love is composed of a single soul inhabiting two bodies." ‚Äì Aristotle</div>
    <button id="startBtn" onclick="startExperience()">Open My Heart üíå</button>
    <button id="musicToggle" onclick="toggleMusic()">Play Music üéµ</button>
    <div id="countdown"></div>

    <div id="confessionBox" class="popup">
        <h2>My Heartfelt Confession üíñ</h2>
        <p id="confessionText"></p>
        <button onclick="clickedButton(showProposal)">See The Special Question</button>
    </div>

    <div id="proposalBox" class="popup">
        <h2>Will You Be Mine Forever? üíç</h2>
        <div class="btn-group">
            <button onclick="clickedButton(acceptProposal)">Yes!</button>
            <button onclick="clickedButton(declineProposal)">No...</button>
        </div>
        <div>
            <label for="noteInput">Write a note to me:</label><br>
            <textarea id="noteInput" rows="3" placeholder="Your love note here..."></textarea>
        </div>
        <div id="response"></div>
    </div>
</div>

<script>
let titleInterval;
const confession = "From the moment I met you, my world became brighter.\nI've fallen for your smile, your kindness, and your very soul.\nWould you make me the happiest person and say 'Yes' to a lifetime together?";
let bgMusicPlaying = false;
const bgMusic = document.getElementById('bgMusic');
const audioClick = new Audio('https://www.soundjay.com/button/sounds/button-16.mp3');

function startExperience() {
    playMusic();
    document.getElementById('startBtn').style.display='none';
    startCountdown(5);
}
function toggleMusic() { bgMusicPlaying?bgMusic.pause(), document.getElementById('musicToggle').textContent='Play Music üéµ', bgMusicPlaying=false : playMusic(); audioClick.currentTime=0; audioClick.play(); }
function playMusic() { bgMusic.play(); document.getElementById('musicToggle').textContent='Pause Music ‚è∏Ô∏è'; bgMusicPlaying=true; }
function startCountdown(seconds){
    const countdownElem = document.getElementById('countdown');
    let current = seconds;
    countdownElem.textContent = `Prepare yourself... ${current}`;
    const timer = setInterval(()=>{
        current--;
        if(current>0) countdownElem.textContent=`Prepare yourself... ${current}`;
        else { clearInterval(timer); countdownElem.textContent=''; showConfession(); }
    },1000);
}
function showConfession() {
    const box=document.getElementById('confessionBox');
    box.style.display='block';
    typeWriter(confession,'confessionText');
}
function typeWriter(text,id){let i=0; const el=document.getElementById(id); el.textContent=''; function t(){i<text.length?(el.textContent+=text.charAt(i),el.scrollTop=el.scrollHeight,i++,setTimeout(t,40)):0;} t();}
function showProposal(){document.getElementById('confessionBox').style.display='none'; const box=document.getElementById('proposalBox'); box.style.display='block'; box.querySelector('#noteInput').focus();}
function acceptProposal(){
    const note=document.getElementById('noteInput').value.trim();
    document.getElementById('response').innerHTML=`<p class='yes-confetti'>Yay! You said Yes! üíñüíØ</p>`+(note?`<p><em>You wrote: "${note}"</em></p>`:'');
    startConfetti(); endlessLove(); changeTitle("üíñ Happily Ever After!");
}
function declineProposal(){
    document.getElementById('response').innerHTML="<p class='no-sad'>üò≠ Oh no! But my love for you will always shine...</p>";
    changeTitle("üíî Broken but loving...");
}
function changeTitle(msg){clearInterval(titleInterval); let original=document.title; let i=false; titleInterval=setInterval(()=>{document.title=i?original:msg;i=!i;},1200);}
setInterval(()=>{
    const heart=document.createElement("div");
    heart.classList.add("heart");
    heart.style.left=Math.random()*100+"vw";
    heart.style.animationDuration=(4+Math.random()*4)+"s";
    heart.innerHTML="‚ù§Ô∏è";
    document.body.appendChild(heart);
    setTimeout(()=>heart.remove(),7000);
},800);
function startConfetti(){for(let i=0;i<25;i++){const c=document.createElement("div"); c.classList.add("heart"); c.style.left=Math.random()*100+"vw"; c.style.bottom="50%"; c.style.fontSize=15+Math.random()*12+"px"; c.style.color=["#ff6f88","#ff1493","#ff80ab","#ff4c8b"][Math.floor(Math.random()*4)]; c.innerHTML="üíñ"; document.body.appendChild(c); setTimeout(()=>c.remove(),4000);}}
function endlessLove(){setInterval(()=>{const msg=document.createElement("div"); msg.textContent="Love you too, Feri üíñ"; msg.style.position="fixed"; msg.style.left=Math.random()*80+"vw"; msg.style.top="100vh"; msg.style.fontSize=(1+Math.random()*1.5)+"rem"; msg.style.color=["#e74c3c","#ff6f88","#d24d4d","#ff1493"][Math.floor(Math.random()*4)]; msg.style.fontWeight="bold"; msg.style.animation="riseUp 6s linear forwards"; document.body.appendChild(msg); setTimeout(()=>msg.remove(),6500);},1800);}
function clickedButton(cb){audioClick.currentTime=0; audioClick.play(); cb();}
document.addEventListener('keydown',(e)=>{if(e.key==="Escape"){['confessionBox','proposalBox'].forEach(id=>{const box=document.getElementById(id); if(box.style.display==='block'){box.style.display='none'; resetExperience();}});}});
function resetExperience(){
    clearInterval(titleInterval);
    document.title=`üíå Feri is Waiting... (${new Date().toLocaleDateString()})`;
    document.getElementById('startBtn').style.display='inline-block';
    document.getElementById('musicToggle').textContent='Play Music üéµ';
    bgMusic.pause(); bgMusic.currentTime=0; document.getElementById('countdown').textContent=''; document.getElementById('confessionText').textContent=''; document.getElementById('response').textContent=''; document.getElementById('noteInput').value=''; bgMusicPlaying=false;
}
document.title=`üíå Feri is Waiting... (${new Date().toLocaleDateString()})`;
</script>
</body>
</html>
